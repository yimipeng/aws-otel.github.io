{
    "componentChunkName": "component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js",
    "path": "/docs/getting-started/operator",
    "result": {"data":{"mdx":{"id":"a73e2b6d-d7cf-5328-9eea-bce9b761b87a","excerpt":"Welcome to the AWS Distro for OpenTelemetry Operator (ADOT Operator) getting started guide. This guide covers the ADOT Operator,\nhow to install it in yourâ€¦","fields":{"slug":"/docs/getting-started/operator/"},"frontmatter":{"title":"Getting Started with the AWS Distro for OpenTelemetry Operator","description":"This page is about getting started with the ADOT Operator.","image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Getting Started with the AWS Distro for OpenTelemetry Operator\",\n  \"description\": \"This page is about getting started with the ADOT Operator.\",\n  \"path\": \"/docs/getting-started/operator\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar SectionSeparator = makeShortcode(\"SectionSeparator\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Welcome to the AWS Distro for OpenTelemetry Operator (ADOT Operator) getting started guide. This guide covers the ADOT Operator,\\nhow to install it in your Amazon Elastic Kubernetes Service (Amazon EKS) cluster using a Helm chart and how to configure the ADOT\\nCollector as Kubernetes Custom Resource (CR), which will be managed by the ADOT Operator. Before reading this guide, we recommend\\nyou to have an understanding of the basics of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://helm.sh/\"\n  }, \"Helm\"), \", the package manager for Kubernetes.\"), mdx(SectionSeparator, {\n    mdxType: \"SectionSeparator\"\n  }), mdx(\"h2\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Introduction\"), mdx(\"p\", null, \"The ADOT Operator is an implementation of a Kubernetes Operator. A Kubernetes Operator is a method of packaging, deploying and\\nmanaging a Kubernetes-native application, which is both deployed on Kubernetes and managed using the Kubernetes APIs and kubectl\\ntooling. The Kubernetes Operator is a custom controller, which introduces new object types through Custom Resource Definition (CRD),\\nan extension mechanism in Kubernetes. In our case, the CRD that is managed by the ADOT Operator is the Collector.\"), mdx(\"p\", null, \"The ADOT Operator will watch for the Collector and is notified about its presence or modification. When the ADOT Operator receives\\nthis notification, it will start running in the following orders. First, it will ensure that all the required connections between\\nthese requests and Kubernetes API server are actually available. Second, it will configure the Collector in the way the user expressed\\nin the configuration file. The diagram below shows how the Collector CR request works in a Kubernetes cluster.\"), mdx(\"img\", {\n    src: operatorImg1,\n    alt: \"Diagram\",\n    style: {\n      \"margin\": \"30px 0\"\n    }\n  }), mdx(SectionSeparator, {\n    mdxType: \"SectionSeparator\"\n  }), mdx(\"h2\", {\n    \"id\": \"install-adot-operator-to-your-eks-cluster\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#install-adot-operator-to-your-eks-cluster\",\n    \"aria-label\": \"install adot operator to your eks cluster permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Install ADOT Operator to Your EKS Cluster\"), mdx(\"h3\", {\n    \"id\": \"prerequisites\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#prerequisites\",\n    \"aria-label\": \"prerequisites permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Prerequisites\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure your Kubernetes version is 1.19 or higher \", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"$ kubectl version | grep \\\"Server Version\\\"\"), \" to check\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure you have Helm v3 or higher installed\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"See \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://helm.sh/docs/intro/install/\"\n  }, \"Installing Helm website\"), \" for more details\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure the following TLS certificate requirement is satisfied  \")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TLS Certificate Requirement\"), mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"As mentioned above, the ADOT Operator uses admission webhooks to mutate and validate the Collector CR requests. In Kubernetes,\\nin order for the API server to communicate with the webhook component, the webhook requires a TLS certificate that the API server\\nis configured to trust. There are three ways for you to generate the required TLS certificate.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The easiest and default method is to install the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://cert-manager.io/docs/\"\n  }, \"cert-manager\"), \". In this way, cert-manager will\\ngenerate a self-signed certificate. \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"See \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://cert-manager.io/docs/installation/kubernetes/\"\n  }, \"cert-manager installation\"), \" for more details.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you have your desired CA or Issuer, you can also provide your own Issuer by configuring the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"admissionWebhooks.certManager.issuerRef\"), \" value\\nof the Operator Helm chart. You will need to specify the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kind\"), \" (Issuer or ClusterIssuer) and the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \". For example, during Operator installation,\\nyou can provide \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--set admissionWebhooks.certManager.issuerRef.kind=YOUR_ISSUER --set admissionWebhooks.certManager.issuerRef.name=YOUR_ISSUER_NAME\"), \"\\noptions. Note that this method also requires the installation of cert-manager.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The last way is to manually modify the secret where the TLS certificate is stored. Make sure you set \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"admissionWebhooks.certManager.enabled\"), \"\\nto \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"false\"), \" during the Operator installation.\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create the namespace for the OpenTelemetry Operator and the secret\", mdx(\"br\", {\n    parentName: \"li\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"$ kubectl create namespace opentelemetry-operator-system\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Config the TLS certificate using \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kubectl create\"), \" command\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl create secret tls opentelemetry-operator-controller-manager-service-cert \\\\\\n    --cert=path/to/cert/file \\\\\\n    --key=path/to/key/file \\\\\\n    -n opentelemetry-operator-system\\n\")))))), mdx(\"h3\", {\n    \"id\": \"step-1-install-the-adot-operator\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#step-1-install-the-adot-operator\",\n    \"aria-label\": \"step 1 install the adot operator permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Step 1: Install the ADOT Operator\"), mdx(\"p\", null, \"First, add Helm repository:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts\\n$ helm repo update\\n\")), mdx(\"p\", null, \"If you didn't create the namespace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"opentelemetry-operator-system\"), \" before (steps in the third method to generate the TLS cert), the\\nOpenTelemetry Operator chart will be installed in the namespace automatically. The installation command example is:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm install \\\\\\n    my-operator open-telemetry/opentelemetry-operator\\n\")), mdx(\"p\", null, \"However, if you create the namespace and place the TLS cert in the desired secret, you will need to set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createNamespace\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"false\"), \" to\\nmake sure Helm won't try to create an existing namespace, which would cause an error. The installation command example is:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm install \\\\\\n    my-operator open-telemetry/opentelemetry-operator \\\\\\n    --set createNamespace=false\\n\")), mdx(\"p\", null, \"Check your ADOT Operator application by running:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm ls -A\\n$ kubectl get all -n opentelemetry-operator-system\\n\")), mdx(\"h3\", {\n    \"id\": \"step-2-install-adot-collector-as-kubernetes-custom-resource-to-your-eks-cluster\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#step-2-install-adot-collector-as-kubernetes-custom-resource-to-your-eks-cluster\",\n    \"aria-label\": \"step 2 install adot collector as kubernetes custom resource to your eks cluster permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Step 2: Install ADOT Collector as Kubernetes Custom Resource to Your EKS Cluster\"), mdx(\"p\", null, \"Once the ADOT Operator deployment is ready, you can deploy the ADOT Collector in your EKS cluster. Managed by the Operator, the Collector\\ncan be deployed as one of four modes: Deployment, DaemonSet, StatefulSet and Sidecar. The default mode is Deployment. We will introduce the\\nbenefits and use cases of each mode and give an example configuration of the Collector in the last section. The diagram below shows the\\nend-to-end workflow of ADOT Operator.\"), mdx(\"img\", {\n    src: operatorImg2,\n    alt: \"Diagram\",\n    style: {\n      \"margin\": \"30px 0\"\n    }\n  }), mdx(\"h4\", {\n    \"id\": \"deployment-mode\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#deployment-mode\",\n    \"aria-label\": \"deployment mode permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deployment Mode\"), mdx(\"p\", null, \"If you want to get more control of the Collector and create a standalone application, Deployment would be your choice. With Deployment,\\nyou can relatively easily scale up the Collector to monitor more targets, roll back to an early version if anything unexpected happens,\\npause the Collector, etc. In general, you can manage your Collector instance just as an application.\"), mdx(\"h4\", {\n    \"id\": \"daemonset-mode\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#daemonset-mode\",\n    \"aria-label\": \"daemonset mode permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"DaemonSet Mode\"), mdx(\"p\", null, \"DaemonSet should satisfy your needs if you want the Collector run as an agent in your Kubernetes nodes. In this case, every Kubernetes\\nnode will have its own Collector copy which would monitor the pods in it.\"), mdx(\"h4\", {\n    \"id\": \"statefulset-mode\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#statefulset-mode\",\n    \"aria-label\": \"statefulset mode permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"StatefulSet Mode\"), mdx(\"p\", null, \"There are three main advantages to deploying the Collector as a StatefulSet:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Predictable names of the Collector instance will be expected\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"If you use above two approaches to deploy the Collector, the pod name of your Collector instance will be unique (its name plus random sequence).\\nHowever, each Pod in a StatefulSet derives its hostname from the name of the StatefulSet and the ordinal of the Pod (my-col-0, my-col-1, my-col-2, etc.).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Rescheduling will be arranged when a Collector replica fails\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"If a Collector pod fails in the StatefulSet, Kubernetes will attempt to reschedule a new pod with the same name to the same node.\\nKubernetes will also attempt to attach the same sticky identity (e.g., volumes) to the new pod.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The target allocator could be configured\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"The target allocator will use a HTTP server to expose the scrape targets to a specific endpoint URL, which will be used by the\\nPrometheus receiver to scrape metrics data. Additionally, the target allocator will use that discovery information to evenly delegate scraping\\njobs to the collector instances inside a StatefulSet based on a replica's current workload.\")), mdx(\"h4\", {\n    \"id\": \"sidecar-mode\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#sidecar-mode\",\n    \"aria-label\": \"sidecar mode permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Sidecar Mode\"), mdx(\"p\", null, \"The biggest advantage of the sidecar mode is that it allows people to offload their telemetry data as fast and reliable as possible\\nfrom their applications. This Collector instance will work on the container level and no new pod will be created, which is perfect to\\nkeep your EKS cluster clean and easily to be managed. Moreover, you can also use the sidecar mode when you want to use a different collect/export\\nstrategy, which just suits this application.\"), mdx(\"p\", null, \"Once a Sidecar instance exists in a given namespace, you can have your deployments from that namespace to get a sidecar by either adding\\nthe annotation \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sidecar.opentelemetry.io/inject: \\\"true\\\"\"), \" to the pod spec of your application, or to the namespace.\"), mdx(\"p\", null, \"Below is an example configuration to deploy the Collector as sidecar.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl apply -f - <<EOF\\napiVersion: opentelemetry.io/v1alpha1\\nkind: OpenTelemetryCollector\\nmetadata:\\n  name: sidecar-for-my-app\\nspec:\\n  image: public.ecr.aws/aws-observability/aws-otel-collector:latest\\n  mode: sidecar\\n  config: |\\n    receivers:\\n      jaeger:\\n        protocols:\\n          grpc:\\n    processors:\\n\\n    exporters:\\n      logging:\\n\\n    service:\\n      pipelines:\\n        traces:\\n          receivers: [jaeger]\\n          processors: []\\n          exporters: [logging]\\nEOF\\n\\n$ kubectl apply -f - <<EOF\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: myapp\\n  annotations:\\n    sidecar.opentelemetry.io/inject: \\\"true\\\"\\nspec:\\n  containers:\\n  - name: myapp\\n    image: jaegertracing/vertx-create-span:operator-e2e-tests\\n    ports:\\n      - containerPort: 8080\\n        protocol: TCP\\nEOF\\n\")), mdx(SectionSeparator, {\n    mdxType: \"SectionSeparator\"\n  }), mdx(\"h2\", {\n    \"id\": \"example-build-your-observability-pipeline-from-scratch\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#example-build-your-observability-pipeline-from-scratch\",\n    \"aria-label\": \"example build your observability pipeline from scratch permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Example: Build Your Observability Pipeline from Scratch\"), mdx(\"p\", null, \"Following this tutorial, you can try out the steps itemized in the previous sections and build an end-to-end pipeline from scratch to\\nscrape your EKS cluster metrics and ingest them to Prometheus remote-write end point such as the Amazon Managed Service for Prometheus (AMP).\\nYou can also use the AWS EMF exporter to send these metrics to Amazon CloudWatch Logs.\"), mdx(\"h3\", {\n    \"id\": \"set-up-eks-cluster-and-iam-role\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#set-up-eks-cluster-and-iam-role\",\n    \"aria-label\": \"set up eks cluster and iam role permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Set up EKS Cluster and IAM Role\"), mdx(\"p\", null, \"We will assume you have already had your EKS cluster ready. If not, you can refer to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html\"\n  }, \"Getting Started with Amazon EKS\"), \"\\nfor more details. Make sure that your Kubernetes version is 1.19 or higher.\"), mdx(\"p\", null, \"Now, let\\u2019s attach the needed policies to your IAM role:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open your IAM console, select \\u201CRoles\\u201D in the left menu\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Search your EKS cluster name and you should see a role name like \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eksctl-YOUR-CLUSTER-NAME-NodeInstanceRole-RANDOM-CHARACTERS\"), \", select it\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Attach \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AmazonAPIGatewayPushToCloudWatchLogs\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AmazonPrometheusFullAccess\"), \" policies to this role\")), mdx(\"h3\", {\n    \"id\": \"create-an-amp-workspace\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#create-an-amp-workspace\",\n    \"aria-label\": \"create an amp workspace permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Create an AMP Workspace\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open your AMP console\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Type the name for your workspace and click create button\")), mdx(\"h3\", {\n    \"id\": \"set-up-helm\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#set-up-helm\",\n    \"aria-label\": \"set up helm permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Set up Helm\"), mdx(\"p\", null, \"If you didn\\u2019t have Helm installed in your working environment, refer to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://helm.sh/docs/intro/install/\"\n  }, \"Helm install website\"), \" for more details.\"), mdx(\"h3\", {\n    \"id\": \"install-cert-manager\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#install-cert-manager\",\n    \"aria-label\": \"install cert manager permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Install cert-manager\"), mdx(\"p\", null, \"In this tutorial, we will just use a self-signed certificate for TLS authentication. Run the following commands to install cert-manager:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl create namespace cert-manager\\n$ helm repo add jetstack https://charts.jetstack.io\\n$ helm repo update\\n$ helm install \\\\\\n    cert-manager jetstack/cert-manager \\\\\\n    --namespace cert-manager \\\\\\n    --create-namespace \\\\\\n    --version v1.5.4\\n\")), mdx(\"p\", null, \"Check if your cert-manager is ready:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl get pod -w -n cert-manager\\n\")), mdx(\"p\", null, \"Make sure the pods are all running.\"), mdx(\"h3\", {\n    \"id\": \"install-adot-operator\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#install-adot-operator\",\n    \"aria-label\": \"install adot operator permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Install ADOT Operator\"), mdx(\"p\", null, \"Run the following commands to install the ADOT Operator:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts\\n$ helm repo update\\n$ helm install my-operator open-telemetry/opentelemetry-operator\\n\")), mdx(\"p\", null, \"Check if your ADOT Operator is ready:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl get pod -w -n opentelemetry-operator-system\\n\")), mdx(\"h3\", {\n    \"id\": \"configure-the-adot-collector\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#configure-the-adot-collector\",\n    \"aria-label\": \"configure the adot collector permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Configure the ADOT Collector\"), mdx(\"p\", null, \"After the Operator application is running in your cluster, you can deploy the Collector as custom resources. In this tutorial,\\nwe will deploy a Collector as Deployment mode to scrape metrics from your EKS cluster infrastructure and ingest the metrics data\\nto your AMP workspace and CloudWatch Logs.\"), mdx(\"p\", null, \"Apply the following configuration to deploy the Collector. Remember to substitute the AMP remote write endpoint, AMP region and CloudWatch region with your own.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"apiVersion: opentelemetry.io/v1alpha1\\nkind: OpenTelemetryCollector\\nmetadata:\\n  name: example\\nspec:\\n  image: public.ecr.aws/aws-observability/aws-otel-collector:latest\\n  mode: deployment\\n  config: |\\n    receivers:\\n      prometheus:\\n        config:\\n          scrape_configs:\\n            - job_name: 'kubernetes-apiservers'\\n              sample_limit: 10000\\n              scheme: https\\n\\n              kubernetes_sd_configs:\\n              - role: endpoints\\n              tls_config:\\n                ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\\n                insecure_skip_verify: true\\n              bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token\\n\\n              relabel_configs:\\n              - source_labels: [__meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]\\n                action: keep\\n                regex: kubernetes;https\\n\\n    processors:\\n      batch:\\n        timeout: 30s\\n        send_batch_size: 10000\\n\\n    exporters:\\n      awsprometheusremotewrite:\\n        endpoint: <YOUR-AMP-REMOTE-WRITE-ENDPOINT>\\n        aws_auth:\\n          service: \\\"aps\\\"\\n          region: <YOUR-AMP-REGION>\\n      awsemf:\\n        region: <YOUR-CLOUDWATCH-REGION>\\n        log_group_name: \\\"/metrics/my-adot-collector\\\"\\n        log_stream_name: \\\"adot-stream\\\"\\n      logging:\\n        loglevel: debug\\n\\n    service:\\n      pipelines:\\n        metrics:\\n          receivers: [prometheus]\\n          processors: []\\n          exporters: [awsprometheusremotewrite,awsemf,logging]\\n---\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRoleBinding\\nmetadata:\\n  name: grant-collector-access\\nsubjects:\\n  - kind: ServiceAccount\\n    name: example-collector\\n    namespace: default\\nroleRef:\\n  kind: ClusterRole\\n  name: cluster-admin\\n  apiGroup: rbac.authorization.k8s.io\\n\")), mdx(\"h3\", {\n    \"id\": \"verify-if-the-metrics-data-was-sent-to-amp-using-the-awscurl-tool\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#verify-if-the-metrics-data-was-sent-to-amp-using-the-awscurl-tool\",\n    \"aria-label\": \"verify if the metrics data was sent to amp using the awscurl tool permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Verify if the Metrics Data was sent to AMP using the awscurl tool\"), mdx(\"p\", null, \"You can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \" to check if AMP received the metrics data. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \" tool is a curl like tool with AWS Signature Version 4\\nrequest signing. It performs requests to AWS services with requests signing using curl interface, and it supports IAM profile\\ncredentials. To learn more about \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \", please refer to its \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/okigan/awscurl\"\n  }, \"Github repository\"), \".\"), mdx(\"p\", null, \"To install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"awscurl\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ pip install awscurl\\n\")), mdx(\"p\", null, \"Run the following command to check if AMP received the metrics data \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scrape_samples_scraped\"), \". You can also query other metrics data.\\nAgain, remember to replace the region and workspace ID with your own.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ awscurl --service=\\\"aps\\\" --region=\\\"YOUR-AMP-REGION\\\" \\\\\\n    \\\"https://aps-workspaces.YOUR-AMP-REGION.amazonaws.com/workspaces/YOUR-AMP-WORKSAPCE-ID/api/v1/query?query=scrape_samples_scraped\\\"\\n\")), mdx(\"h3\", {\n    \"id\": \"verify-if-the-metrics-data-was-sent-to-cloudwatch\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#verify-if-the-metrics-data-was-sent-to-cloudwatch\",\n    \"aria-label\": \"verify if the metrics data was sent to cloudwatch permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Verify if the Metrics Data was sent to CloudWatch\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open CloudWatch console\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Select \\u201CLogs \\u2192 Log groups\\u201D in the left menu\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click \\u201C/metrics/my-adot-collector\\u201D log group\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Click \\u201Cadot-stream\\u201D log stream\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"See if your metrics data is there\")), mdx(\"h3\", {\n    \"id\": \"cleanup\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#cleanup\",\n    \"aria-label\": \"cleanup permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Cleanup\"), mdx(\"p\", null, \"Delete the Collector resource:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ kubectl delete -f - <<EOF\\napiVersion: opentelemetry.io/v1alpha1\\nkind: OpenTelemetryCollector\\nmetadata:\\n  name: example\\n---\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRoleBinding\\nmetadata:\\n  name: grant-collector-access\\nEOF\\n\")), mdx(\"p\", null, \"Uninstall the Operator:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm uninstall my-operator\\n\")), mdx(\"p\", null, \"Uninstall the cert-manager:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-console\"\n  }, \"$ helm --namespace cert-manager delete cert-manager\\n$ kubectl delete ns cert-manager\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Introduction"},{"depth":2,"value":"Install ADOT Operator to Your EKS Cluster"},{"depth":3,"value":"Prerequisites"},{"depth":3,"value":"Step 1: Install the ADOT Operator"},{"depth":3,"value":"Step 2: Install ADOT Collector as Kubernetes Custom Resource to Your EKS Cluster"},{"depth":4,"value":"Deployment Mode"},{"depth":4,"value":"DaemonSet Mode"},{"depth":4,"value":"StatefulSet Mode"},{"depth":4,"value":"Sidecar Mode"},{"depth":2,"value":"Example: Build Your Observability Pipeline from Scratch"},{"depth":3,"value":"Set up EKS Cluster and IAM Role"},{"depth":3,"value":"Create an AMP Workspace"},{"depth":3,"value":"Set up Helm"},{"depth":3,"value":"Install cert-manager"},{"depth":3,"value":"Install ADOT Operator"},{"depth":3,"value":"Configure the ADOT Collector"},{"depth":3,"value":"Verify if the Metrics Data was sent to AMP using the awscurl tool"},{"depth":3,"value":"Verify if the Metrics Data was sent to CloudWatch"},{"depth":3,"value":"Cleanup"}]}},"pageContext":{"slug":"/docs/getting-started/operator/","repositoryEditUrl":"https://github.com/rocketseat/gatsby-themes/tree/main/examples/gatsby-theme-docs/src/docs/getting-started/operator.mdx","repositoryProvider":"GitHub"}},
    "staticQueryHashes": ["2501019404","973074209"]}